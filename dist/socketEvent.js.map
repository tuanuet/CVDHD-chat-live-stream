{"version":3,"sources":["../socketEvent.js"],"names":["ss","require","fs","module","exports","io","of","on","socket","console","log","id","data","cb","join","roomId","err","buffer","broadcast","to","emit"],"mappings":";;;;AAAA,IAAMA,KAAKC,QAAQ,kBAAR,CAAX;;AAGA,IAAMC,KAAKD,QAAQ,IAAR,CAAX;;AAEAE,OAAOC,OAAP,GAAiB,UAACC,EAAD,EAAQ;AACvBA,KAAGC,EAAH,CAAM,aAAN,EAAqBC,EAArB,CAAwB,YAAxB,EAAsC,UAACC,MAAD,EAAY;AAChDC,YAAQC,GAAR,CAAY,oBAAZ,EAAkCF,OAAOG,EAAzC;;AAEAH,WAAOD,EAAP,CAAU,MAAV,EAAkB,UAACK,IAAD,EAAOC,EAAP,EAAc;AAC9BL,aAAOM,IAAP,CAAYF,KAAKG,MAAjB,EAAyB,UAACC,GAAD,EAAS;AAChC,YAAIA,GAAJ,EAAS,OAAOH,GAAG,KAAH,CAAP;AACTL,eAAOO,MAAP,GAAgBH,KAAKG,MAArB;;AAEA,eAAOF,GAAG,IAAH,CAAP;AACD,OALD;AAMD,KAPD;;AASAL,WAAOD,EAAP,CAAU,WAAV;AAAA,yEAAuB,iBAAOU,MAAP;AAAA;AAAA;AAAA;AAAA;AACrB,oBAAI;AACFT,yBAAOU,SAAP,CAAiBC,EAAjB,CAAoBX,OAAOO,MAA3B,EAAmCK,IAAnC,CAAwC,6BAAxC,EAAuEH,MAAvE;AACD,iBAFD,CAEE,OAAOD,GAAP,EAAY;AACZ;AACD;;AALoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAvB;;AAAA;AAAA;AAAA;AAAA;AAOD,GAnBD;AAoBD,CArBD","file":"socketEvent.js","sourcesContent":["const ss = require('socket.io-stream');\n\n\nconst fs = require('fs');\n\nmodule.exports = (io) => {\n  io.of('/livestream').on('connection', (socket) => {\n    console.log('Event connection: ', socket.id);\n\n    socket.on('join', (data, cb) => {\n      socket.join(data.roomId, (err) => {\n        if (err) return cb(false);\n        socket.roomId = data.roomId;\n\n        return cb(true);\n      });\n    });\n\n    socket.on('streaming', async (buffer) => {\n      try {\n        socket.broadcast.to(socket.roomId).emit('server-broadcast-livestream', buffer);\n      } catch (err) {\n        // console.log(err.message);\n      }\n    });\n  });\n};\n"]}